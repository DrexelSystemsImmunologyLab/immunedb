#!/usr/bin/env python2
import sys
import argparse
import sldb.common.config as config

if __name__ == '__main__':
    parser = config.get_base_arg_parser('Identifies V and J genes from '
                                        'FASTA files')
    parser.add_argument('base_dirs', nargs='+', help='Base directories for samples.')
    parser.add_argument('v_germlines', help='FASTA file with IMGT gapped '
                        'V-gene germlines')
    parser.add_argument('--limit-alignments', nargs='+', default=('R1', 'R1+R2'),
                        help='Read types to process (R1, R2, and/or '
                        'R1+R2).  Default: R1 R1+R2')
    args = parser.parse_args()

    session = config.init_db(args.master_db_config, args.data_db_config)

    from sldb.identification.identify import run_identify
    sys.exit(run_identify(session, args))
